<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout=http://www.ultraq.net.nz/thymeleaf/layout
      layout:decorate="~{common/layout/layout}">
<body>
<div layout:fragment="content">
  <div class="category-bar">
    <!-- ì¹´í…Œê³ ë¦¬ ë§í¬ -->
    <a href="#category1">ê°€ì „ì œí’ˆ</a>
    <a href="#category2">ì „ìì œí’ˆ</a>
    <a href="#category3">íŒ¨ì…˜ì˜ë¥˜/ì¡í™”</a>
    <a href="#category4">ë·°í‹°/ë¯¸ìš©</a>
    <a href="#category5">ì¶œì‚°/ìœ ì•„ë™</a>
    <a href="#category6">ì‹í’ˆ</a>
    <a href="#category7">ì£¼ë°©ìš©í’ˆ</a>
    <a href="#category8">ìƒí™œìš©í’ˆ</a>
  </div>

  <div class="post-container">
    <div th:each="entry:${PostGetListResponseDtoMap.entrySet}" class="post-card">
      <a th:href="@{/posts/{postId}(postId=${entry.key})}">
        <div class="post-image-container">
          <img th:src="${entry.value.thumbnailUrl}" alt="Post Image" class="post-image">
        </div>
        <h2 th:text="${entry.value.title}" class="post-title"></h2>
        <div class="post-stats">
          <span class="view-count">ì¡°íšŒìˆ˜ <span th:text="${entry.value.viewCnt}"></span></span>
          <span class="favorite-count">ì°œ <span th:text="${entry.value.favoriteCnt}"></span></span>
          <span class="modified-date">ì˜¬ë¦° ë‚ ì§œ <span
              th:text="${entry.value.modifiedUpTime}"></span></span>
        </div>
      </a>
      <button
          th:data-post-id="${entry.key}"
          onclick="toggleFavorite(this.getAttribute('data-post-id'))"
          th:text="${entry.value.favoriteStatus()} == true ? 'ğŸ’™' : 'ğŸ¤'"
          type="button"
      ></button>
    </div>
  </div>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script th:inline="javascript">
    function toggleFavorite(postId) {
      $.ajax({
        url: '/posts/' + postId + '/favorite',
        type: 'PATCH',
        contentType: 'application/json; charset=utf-8',
        success: function() {
          location.reload()
        }
      });
    }
  </script>
</div>
</body>
</html>